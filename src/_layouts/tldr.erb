---
layout: default
---

<h1><%= data.title %></h1>

<%= yield %>

<wa-button variant="brand" hx-put="/feedback/<%= resource.basename_without_ext %>"
  hx-vals='{"vote_type": "upvote"}'
  hx-target="#tldr-sentiment"
  hx-swap="outerHTML">
  Upvote!
</wa-button>

<wa-button variant="brand" hx-put="/feedback/<%= resource.basename_without_ext %>"
  hx-vals='{"vote_type": "downvote"}'
  hx-target="#tldr-sentiment"
  hx-swap="outerHTML">
  Downvote...
</wa-button>

<br />
<br />

<strong>TLDR Sentiment</strong>
<br />
<br />
<div id="tldr-sentiment">
</div>

  <wa-card style="max-width: 60ch; margin-right: auto;">
    <div class="wa-stack">
      <h3 class="wa-heading-l">Comments</h3>
      <wa-textarea aria-label="Comment" id="comments" name="comments"></wa-textarea>
      <wa-button variant="brand" hx-put="/comments/<%= resource.basename_without_ext %>"
        hx-include="#comments"
        hx-target="#tldr-comments"
        hx-swap="outerHTML"
        hx-on::after-request="document.getElementById('comments').value = ''">
        Add Comment
      </wa-button>
      <wa-divider></wa-divider>
      <div id="tldr-comments">
        <%= render "comments", all_comments: Comments.where(filename: resource.basename_without_ext) %>
      </div>
    </div>
  </wa-card>
